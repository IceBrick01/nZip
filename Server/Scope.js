var t=class t{static createInlineStyle(t){const e={};for(const i of Object.keys(t))if(void 0!==t[i])if("center"===i)t[i].includes("horizontal")&&("column"===t.flexDirection?e["align-items"]="center":e["justify-content"]="center"),t[i].includes("vertical")&&("column"===t.flexDirection?e["justify-content"]="center":e["align-items"]="center");else if("horizontalAlign"===i)"column"===t.flexDirection?e["align-items"]=t.horizontalAlign:e["justify-content"]=t.horizontalAlign;else if("verticalAlign"===i)"column"===t.flexDirection?e["justify-content"]=t.verticalAlign:e["align-items"]=t.verticalAlign;else if(void 0!==r[i])for(const o of r[i])e[o]=t[i];else e[i]=t[i];return Object.keys(e).map((t=>`${t}:${this.parseStyleValue(e[t])}`)).join(";")}static parseStyleValue(t){return i(e(t,0).tokens)}_blocks={};constructor(){}addStyleBlock(t,e){return this._blocks[t]={type:"style",value:e},this}addKeyframeBlock(t,e){return this._blocks[t]={type:"keyframe",value:e},this}addOther(t,e){return this._blocks[t]={type:"other",value:e},this}render(){return Object.keys(this._blocks).map((e=>{const i=this._blocks[e];return"style"===i.type?`${e}{${t.createInlineStyle(i.value)}}`:"keyframe"===i.type?`@keyframe ${e}{${i.value.map((e=>`${e[0]}{${t.createInlineStyle(e[1])}}`)).join("")}}`:`${e}{${Object.keys(i.value).map((t=>`${t}:${i.value[t]}`)).join(";")}}`})).join("")}};function e(t,r){const o=[];var n=void 0;function s(){return void 0!==n&&(o.push({type:n.type,value:n.value}),n=void 0,!0)}function a(t){o.length>0&&"text"===o[o.length-1].type?o[o.length-1].value+=t:o.push({type:"text",value:t})}for(let l=r;l<t.length;l++)if(" "===t[l])s()," "!==t[l-1]&&a(" ");else if("$"===t[l])s(),n={type:"variable",value:""};else if(["+","-","*","/"].includes(t[l]))" "===t[l-1]&&" "===t[l+1]?(s(),o.push({type:"operator",value:t[l]})):void 0===n?a(t[l]):n.value+=t[l];else if("("===t[l]){s();const r=e(t,l+1);o.push({type:"block",value:i(r.tokens)}),l=r.end}else{if(")"===t[l])return s(),{tokens:o,end:l};","===t[l]?(s(),o.push({type:"seperator",value:","})):void 0===n?a(t[l]):n.value+=t[l]}return s(),{tokens:o,end:t.length-1}}function i(t){if(void 0!==t.find((t=>"seperator"===t.type))){const e=[];for(const r of((t,e)=>{const i=[];let r=[];for(const o of t)e(o)?(i.push(r),r=[]):r.push(o);return r.length>0&&i.push(r),i})(t,(t=>"seperator"===t.type)))e.push(i(r));return e.join(",")}if(void 0!==t.find((t=>"operator"===t.type))){const e=[];let r=[];for(const o of t)"operator"===o.type?(e.push(i(r)),e.push(o.value),r=[]):r.push(o);return r.length>0&&e.push(i(r)),`calc(${e.join(" ")})`}{let e="";for(const i of t)"text"===i.type?e+=i.value:"variable"===i.type?e+=`var(--${i.value})`:"block"===i.type&&(e+=`(${i.value})`);return e}}var r={all:["all"],flex:["flex"],gridRow:["grid-row"],gridColumn:["grid-column"],gridRowStart:["grid-row-start"],gridRowEnd:["grid-row-end"],gridColumnStart:["grid-column-start"],gridColumnEnd:["grid-column-end"],position:["position"],display:["display"],flexDirection:["flex-direction"],flexShrink:["flex-shrink"],flexWrap:["flex-wrap"],gridAutoRows:["grid-auto-rows"],gridAutoColumns:["grid-auto-rows"],gridTemplateRows:["grid-template-rows"],gridTemplateColumns:["grid-template-columns"],gap:["gap"],rowGap:["row-gap"],columnGap:["column-gap"],backgroundColor:["background-color"],backgroundImage:["background-image"],backgroundSize:["background-size"],backgroundRepeat:["background-repeat"],backgroundX:["background-position-x"],backgroundY:["background-position-y"],foregroundColor:["color"],borderStyle:["border-style"],borderColor:["border-color"],borderSize:["border-size"],borderRadius:["border-radius"],font:["font-family"],fontSize:["font-size"],fontWeight:["font-weight"],textAlign:["text-align"],textWrap:["text-wrap"],textOverflow:["text-overflow"],textDecoration:["text-decoration"],textDecorationLine:["text-decoration-line"],textDecorationStyle:["text-decoration-style"],textDecorationColor:["text-decoration-color"],textDecorationThickness:["text-decoration-thickness"],lineHeight:["line-height"],boxShadow:["box-shadow","-webkit-box-shadow"],textShadow:["text-shadow"],left:["left"],right:["right"],top:["top"],bottom:["bottom"],width:["width"],minWidth:["min-width"],maxWidth:["max-width"],height:["height"],minHeight:["min-height"],maxHeight:["max-height"],margin:["margin"],marginLeft:["margin-left"],marginRight:["margin-right"],marginTop:["margin-top"],marginBottom:["margin-bottom"],padding:["padding"],paddingLeft:["padding-left"],paddingRight:["padding-right"],paddingTop:["padding-top"],paddingBottom:["padding-bottom"],filter:["filter"],backdropFilter:["backdrop-filter"],opacity:["opacity"],transform:["transform"],transition:["transition"],transitionProperty:["transition-property"],transitionDuration:["transition-duration"],animation:["animation"],animationName:["animation-name"],animationIterationCount:["animation-iteration-count"],animationDirection:["animation-direction"],overflow:["overflow"],overflowX:["overflow-x"],overflowY:["overflow-y"],zIndex:["z-index"],cursor:["cursor"],userSelect:["user-select"]},o=class e{static render(t,i,r){return new e(t,i,r).render()}static create(t,i,r){return new e(t,i,r).create()}tagName;attributes;children=[];constructor(t,e,i){if(this.tagName=t,this.attributes=void 0===e?{}:e,void 0!==i)for(const t of i)void 0!==t&&this.children.push(t)}addChild(t){return this.children.push(t),t}addChildren(t){this.children=this.children.concat(t)}render(){const e=Object.keys(this.attributes).filter((t=>"innerHTML"!==t)).map((e=>`${e}="${"string"==typeof this.attributes[e]?this.attributes[e]:t.createInlineStyle(this.attributes.style)}"`)).join(" "),i=this.children.map((t=>t.render())).join("");return`<${this.tagName}${e.length>0?` ${e}`:""}>${void 0===this.attributes.innerHTML?i:this.attributes.innerHTML}</${this.tagName}>`}create(){const e="svg"===this.tagName?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(this.tagName);for(const i of Object.keys(this.attributes))"innerHTML"===i?e.innerHTML=this.attributes.innerHTML:"string"==typeof this.attributes[i]?e.setAttribute(i,this.attributes[i]):e.setAttribute(i,t.createInlineStyle(this.attributes[i]));for(const t of this.children)e.appendChild(t.create());return e}},n=class{_attributes={};createAttribute(t,e){if(void 0!==this._attributes[t])throw new Error(`Attribute Already Exist: "${t}"`);this._attributes[t]=e}deleteAttribute(t){if(void 0===this._attributes[t])throw new Error(`Attribute Not Found: "${t}"`);delete this._attributes[t]}deleteAllAttributes(){this._attributes={}}getAttribute(t){return this._attributes[t]}checkElementAttributes(t,e){if(void 0!==t.tagName)if(void 0===e)for(const e of t.getAttributeNames())this.checkElementAttributes(t,e);else{const i=this.getAttribute(e);if(void 0!==i){const r=t.hasAttribute("activated")?t.getAttribute("activated").split(","):[];r.includes(e)||(r.push(e),t.setAttribute("activated",r.join(",")),i(t,t.getAttribute(e)))}}}checkElementAttributesRecursively(t){if(this.checkElementAttributes(t),void 0!==t.tagName)for(let e=0;e<t.children.length;e++)this.checkElementAttributesRecursively(t.children.item(e))}},s=(t,e)=>{for(let i=0;i<Math.pow(10,t);i++){const r=i.toString().padStart(t,"0");if(!(Array.isArray(e)?e.includes(r):r in e))return r}throw new Error("Ran Out Of IDs")},a=class{_listeners={};createListener(t,e,i,r){const o=s(5,this._listeners);return this._listeners[o]={target:t,name:e,callback:(...t)=>{i(...t),!0===r&&this.deleteListener(o)}},t.addEventListener(e,this._listeners[o].callback),o}deleteListener(t){if(void 0===this._listeners[t])throw new Error(`Listener Not Found: "${t}"`);const e=this._listeners[t];e.target.removeEventListener(e.name,e.callback),delete this._listeners[t]}deleteAllTimers(){for(const t of Object.keys(this._listeners))this.deleteListener(t)}},l=class{static addPlugin(t){if(void 0!==c[t.id])throw new Error(`Plugin Already Exist: "${t.id}"`);return c[t.id]=t,t}static removePlugin(t){if(void 0===c[t])throw new Error(`Plugin Not Found: "${t}"`);delete c[t]}static initializePlugins(t){for(const e of Object.keys(c))c[e].initialize(t)}},c={},d=class{_promises={};handlePromise(t){return new Promise(((e,i)=>{const r=s(5,this._promises);this._promises[r]={abandon:()=>{delete this._promises[r],i()}},t.then((t=>{void 0!==this._promises[r]&&(delete this._promises[r],e(t))}))}))}abandonPromise(t){if(void 0===this._promises[t])throw new Error(`Promise Not Found: "${t}"`);this._promises[t].abandon()}abandonAllPromises(){for(const t of Object.keys(this._promises))this.abandonPromise(t)}},u=class{_interval=void 0;_timers={};createTimeout(t,e){return this._createTimer(1,t,void 0,e)}createInterval(t,e){return this._createTimer(1/0,t,e,void 0)}createLoop(t,e,i,r){return this._createTimer(t,e,i,r)}deleteTimer(t){if(void 0===this._timers[t])throw new Error(`Timer Not Found: "${t}"`);delete this._timers[t],0===Object.keys(this._timers).length&&void 0!==this._interval&&this._stopTimer()}deleteAllTimers(){this._timers={},this._stopTimer()}_createTimer(t,e,i,r){const o=s(5,this._timers);return this._timers[o]={times:t,interval:e,callback:i,endCallback:r,count:0,lastIterateTimestamp:performance.now()},void 0===this._interval&&this._startTimer(),o}_startTimer(){this._interval=setInterval((()=>{const t=performance.now();for(const e of Object.keys(this._timers)){const i=this._timers[e];t-i.lastIterateTimestamp>i.interval&&(i.lastIterateTimestamp=t,i.times===1/0?void 0!==i.callback&&i.callback(1/0):i.count<i.times?(void 0!==i.callback&&i.callback(i.count),i.count++):(void 0!==i.endCallback&&i.endCallback(),delete this._timers[e]))}}),1)}_stopTimer(){clearInterval(this._interval),this._interval=void 0}},h=class{static registerScope(t){const e=s(5,g);return g[e]=t,void 0===m&&(m=new MutationObserver((t=>{for(const e of t)if("childList"===e.type)e.addedNodes.forEach((t=>{const e=this.getParentScope(t);void 0!==e&&e.AttributeManager.checkElementAttributes(t)}));else if("attributes"===e.type){const t=this.getParentScope(e.target);void 0!==t&&t.AttributeManager.checkElementAttributes(e.target,e.attributeName)}}))).observe(document.body,{subtree:!0,childList:!0,attributes:!0}),e}static unregisterScope(t){if(void 0===g[t])throw new Error(`Scope Not Found: "${t}"`);delete g[t]}static getScope(t){if(void 0===g[t])throw new Error(`Scope Not Found: "${t}"`);return g[t]}static getAllScopes(){return Object.keys(g)}static getParentScope(t){if(null===t.parentElement)return;const e=t.parentElement.getAttribute("scope");return null===e?this.getParentScope(t.parentElement):g[e]}},m=void 0,g={},p=class{static createStyle(t,e){for(const i of Object.keys(b))if(b[i].content===t&&b[i].modifier===e)return`scope-${i}`;const i=s(5,b);return b[i]={content:t,modifier:e},this.updateStyles(),`scope-${i}`}static updateStyles(){void 0===f&&(f=document.head.appendChild(document.createElement("style")));const t=[];for(const e of Object.keys(b)){const i=b[e];t.push(`.scope-${e}:${void 0===i.modifier?"":i.modifier}{${b[e].content}}`)}f.textContent=t.join("")}},f=void 0,b={},v=class{static use(t){l.addPlugin(t)}_id;_root;ListenerManager;TimerManager;PromiseManager;PluginManager;AttributeManager;StyleManager;constructor(t){if(null!==t.getAttribute("scope"))throw new Error("Element Is Already The Root Of A Scope");this._id=h.registerScope(this),this._root=t,this.ListenerManager=new a,this.TimerManager=new u,this.PromiseManager=new d,this.PluginManager=l,this.AttributeManager=new n,this.StyleManager=p,t.setAttribute("scope",this._id),l.initializePlugins(this),this.AttributeManager.checkElementAttributesRecursively(this.root)}get id(){return this._id}get root(){return this._root}getElementByID(t){return this._root.querySelector(`#${t}`)}getElementByClassName(t){return this._root.querySelectorAll(`.${t}`)}isOwnedByScope(t){let e=t;for(;;){const t=h.getParentScope(e);if(void 0===t)return!1;if(t.id===this.id)return!0;e=t.root}}listen(t,e,i,r){return this.ListenerManager.createListener(t,e,i,r)}deleteListener(t){this.ListenerManager.deleteListener(t)}createTimeout(t,e){return this.TimerManager.createTimeout(t,e)}createInterval(t,e){return this.TimerManager.createInterval(t,e)}createLoop(t,e,i,r){return this.TimerManager.createLoop(t,e,i,r)}deleteTimer(t){this.TimerManager.deleteTimer(t)}async handle(t){return this.PromiseManager.handlePromise(t)}loadHTML(t){this._reset(),this.root.innerHTML=t,this.AttributeManager.checkElementAttributesRecursively(this.root)}remove(){this._reset(),h.unregisterScope(this._id),this.root.remove()}_reset(){this.ListenerManager.deleteAllTimers(),this.TimerManager.deleteAllTimers(),this.PromiseManager.abandonAllPromises();for(const t of h.getAllScopes()){const e=h.getParentScope(h.getScope(t).root);void 0!==e&&e.id===t&&e.remove()}}};export{n as AttributeManager,o as Element,a as ListenerManager,l as PluginManager,d as PromiseManager,v as Scope,t as Style,u as TimerManager};